author: 陈冰顺
title: {{fromTitle}}
date: 202110101629
status: one of [hold|assess|trial|adopt]
aliases: 
- quadratic form
tags: 
- quadratic_form
- 二次型
from: 2020年高等代数考点归纳与典型题（含考研真题）详解-圣才电子书-微信读书 
topic:
- 二次型
history:
- 
---

## 【知识点引入】  
-   接着我们再来补充一些mysql中常用函数  
### 【条件函数语法】  
-   `case when`
	-   ``` case 字段名 when 值1 then 值2 else 值3 end```  
	-   【解释】  
		-   创建新的一列字段，当某字段等于值1在新列中就等于值2，除此之外的数据在新列中就等于值3   
	-   或 `case when 字段名 运算符 值1 then 值2 else 值3 end`  
	-   【解释】  
		-   创建新的一列字段，字段名 运算符 值1这一部分可以看成是条件代码，当某字段符合条件时，在新列中就等于值2，除此之外的数据在新列中就等于值3  
-   `if` 
	-   `if(字段名 运算符 值1,值2,值3)`  
	-   【解释】  
		-   创建新的一列字段，如果字段满足条件，在新列中就等于值2，否则就等于值3  
-   【数据类型转换函数语法】  
	-   `cast` 
		-   cast(字段名 as type)  
		-   type:date或int等  
		-   【解释】  
			-   将字段从原来的数据类型转换成指定的数据类型，比如日期date，整数型int等，在type的位置填写指定的参数即可  
	-   date_formate  
		-   date_formate(date,formate)  
		-   格式  
			-   ![](https://api2.mubu.com/v3/document_image/cf80473f-0688-46a4-abf9-8bb0d09cf056-9404487.jpg)  
		-   常用日期格式  
			-   ![](https://api2.mubu.com/v3/document_image/aafe6d91-878e-4ca6-abb9-e5021f2e862f-9404487.jpg)  
		-   【解释】  
			-   date_formate用于以不同格式显示日期/时间数据。date 指合法的日期字段，format 规定日期/时间的输出格式，记得格式外加单引号  
			-   例如：date_formate('2021-06-01','%m/%d/%Y')返回数据06/01/2021  

### 【日期函数语法】  
- `year、month、day`
	- `year(date)`  
	- `month(date)`
	- `day(date) ` 
	-   【解释】  
		-   `year`
			-   函数提取数据格式为日期或时间字段的年份  
		-   `month`
			-   提取月份，
		-   `day`
			-   提取几号  
		-   `hour, minute, second`等函数同理  
		-   例如：`year('2021-06-01')`返回数据2021  
-   `now `
	-   `now()`  
	-   【解释】没有其他参数，返回当前的日期和时间  
-   `date_add`  
	-   `date_add(date,interval 值 type) ` 
	-   `type`
		-   ![](https://api2.mubu.com/v3/document_image/c80aa065-bf2e-4bbd-ad38-f3d0595b1c52-9404487.jpg)  
	-   【解释】  
		-   向日期添加指定的时间间隔  
		-   例如：
			-   `date_add('2021-06-01',interval 2 day)`
				-   向日期函数2021-06-01加了2天，返回值2021-06-03  
-   `date_sub`
	-   `date_sub(date,interval 值 type)`
	-   【解释】  
		-   从日期减去指定的时间间隔  
		-   `type`参数与`date_add`相同，使用方法也相同  
-   `datediff`
	-   `datediff(date1,date2)`
	-   【解释】  
		-   返回两个日期之间的天数，date1-date2  
		-   date1 和 date2 代表是日期或日期加时间的表达式  
		-   注意只有值的日期部分参与计算  
		-   例如：
			-   `datediff('2021-06-08','2021-06-01')`
				-   返回`7`
			-   `datediff('2021-06-01','2021-06-08')`
				-   返回`-7` 
### 【字符处理函数语法】  
-   `round`  
	-   round(字段名,小数指定位数)  
	-   【解释】  
		-   round函数将数值字段舍入到指定的小数位数  
		-   例如：round(3.15,1)返回数据3.2  
-   concat  
	-   concat(字段名1,字段名2,'字符串')  
	-   【解释】  
		-   concat是字符串拼接函数，用于将多个字符串连接在一起  
		-   例如：concat('123',' ','ABC')返回数据123 ABC  
-   left、right  
	-   left(字符串,n)  
	-   right(字符串,n)  
	-   【解释】  
		-   left函数返回字符串从左到右n个字符  
		-   right函数返回字符串从右到左n个字符  
		-   例如：left('123456',2)返回12，right('123456',3)返回456  
-   substring  
	-   substring(字符串,x,y)  
	-   【解释】  
		-   substring函数用来截取字符串从x位开始取y位，如果没有y则取从x位开始到最后一位  
		-   例如：substring('New York',3,4)返回w Yo，substring('New York',3)返回w York  
-   【例题讲解】  
	-   点击链接[https://sqlzoo.net/wiki/Window_LAG](https://sqlzoo.net/wiki/Window_LAG) 第一题  
		-   查看本题数据库表covid  
			-   观察本表数据，记录了国家（name）截至时间（whn）的累计确诊（confirmed），累计死亡（deaths），累计治愈（recovered）![](https://api2.mubu.com/v3/document_image/95b0db99-65e7-4033-ac3a-d0746cf048eb-9404487.jpg)  
		-   我们以本题为例试验一下我们刚学习完的函数  
		-   case when和if函数  
			-   【运行代码】  
				-   select  
				-   recovered 累计治愈人数  
				-   ,case when recovered = 1 then 'one' when recovered > 1 then 'more' else '0' end  
				-   from covid  
				-   where recovered > 0  
			-   【运行结果】  
				-   ![](https://api2.mubu.com/v3/document_image/c2a7ffdd-bef7-4fee-b274-8d97c5012e91-9404487.jpg) 
		-   year、month、day函数  
			-   【运行代码】  
				-   select  
				-   whn 更新时间  
				-   ,year(whn) 年  
				-   ,month(whn) 月  
				-   ,day(whn) 日  
				-   from covid  
				-   where recovered > 0  
			-   【运行结果】  
				-   ![](https://api2.mubu.com/v3/document_image/4c49acb4-4492-4c62-8f87-b48e72cc4a75-9404487.jpg)  
		-   date_add  
			-   【运行代码】  
				-   select  
				-   whn 更新时间  
				-   ,date_add(whn,interval 2 day) 加2天  
				-   from covid  
				-   where recovered > 0  
			-   【运行结果】  
				-   ![](https://api2.mubu.com/v3/document_image/12bcc936-034d-47ca-8b27-2f4a415761ff-9404487.jpg)  
		-   round和concat嵌套得到百分比数据  
			-   【运行代码】  
				-   select  
				-   confirmed  
				-   ,deaths  
				-   ,recovered  
				-   ,recovered/confirmed  
				-   ,concat(round((recovered/confirmed)*100,2),'%') 治愈率  
				-   from covid  
				-   where recovered/confirmed > 0.3  
			-   【运行结果】  
				-   ![](https://api2.mubu.com/v3/document_image/3ab16e00-e6fb-4a39-b7df-bc532b7bbce2-9404487.jpg)  
		-   substring  
			-   【运行代码】  
				-   select distinct  
				-   name  
				-   ,substring(name,2,3)  
				-   ,substring(name,2)  
				-   from covid  
				-   where recovered/confirmed > 0.3  
			-   【运行结果】  
				-   ![](https://api2.mubu.com/v3/document_image/a3acb292-2c0e-4e6b-aaa3-42ccfdfef731-9404487.jpg)